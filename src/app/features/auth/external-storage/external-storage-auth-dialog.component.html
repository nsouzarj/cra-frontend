<div class="dialog-container">
  <div class="dialog-header">
    <h2>Conexão com Google Drive</h2>
  </div>

  <div class="dialog-content">
    <div *ngIf="!isConnected && !isLoading" class="auth-section">
      <p>Conecte-se ao seu Google Drive para armazenar arquivos na nuvem.</p>
      <div class="button-group">
        <button 
          mat-raised-button
          color="primary"
          (click)="openExternalStorageAuthPopup()"
          [disabled]="isLoading || isCheckingStatus">
          <mat-spinner *ngIf="isLoading || isCheckingStatus" diameter="20" style="display: inline-block; margin-right: 8px;"></mat-spinner>
          Conectar ao Google Drive
        </button>
      </div>
    </div>
    
    <div *ngIf="isConnected" class="connected-section">
      <mat-icon style="color: green; font-size: 48px;">check_circle</mat-icon>
      <h3>Conexão bem-sucedida</h3>
      <p>Seu Google Drive está conectado e pronto para uso.</p>
      <p class="success-message">Autenticação concluída com sucesso!</p>
    </div>
    
    <div *ngIf="isLoading || isCheckingStatus" class="loading-section">
      <mat-spinner diameter="50"></mat-spinner>
      <p *ngIf="isLoading">Gerando URL de autorização...</p>
      <p *ngIf="isCheckingStatus">Verificando status da conexão...</p>
    </div>
    
    <div *ngIf="error" class="alert alert-danger">
      {{ error }}
    </div>
  </div>

  <div class="dialog-actions">
    <button mat-button (click)="closeDialog(false)">Cancelar</button>
    <button mat-raised-button color="primary" (click)="closeDialog(true)" [disabled]="!isConnected">
      Continuar
    </button>
  </div>
</div>