<div class="container">
  <h2>Autenticação do Google Drive</h2>
  
  <div *ngIf="!isConnected && !isLoading" class="auth-section">
    <p>Conecte-se ao seu Google Drive para armazenar arquivos na nuvem.</p>
    <div class="button-group">
      <button 
        mat-raised-button
        color="primary"
        (click)="openExternalStorageAuthPopup()"
        [disabled]="isLoading || isCheckingStatus">
        <mat-spinner *ngIf="isLoading || isCheckingStatus" diameter="20" style="display: inline-block; margin-right: 8px;"></mat-spinner>
        Conectar ao Google Drive
      </button>
    </div>
    <div class="info-message" *ngIf="showAuthSuccessMessage">
      <mat-icon style="color: green;">check_circle</mat-icon>
      <p>Autenticação bem-sucedida! Esta janela será fechada automaticamente.</p>
    </div>
  </div>
  
  <div *ngIf="isConnected" class="connected-section">
    <mat-icon style="color: green; font-size: 48px;">check_circle</mat-icon>
    <h3>Conexão bem-sucedida</h3>
    <p>Seu Google Drive está pronto para uso.</p>
    <p class="success-message">Autenticação concluída com sucesso!</p>
  </div>
  
  <div *ngIf="isLoading || isCheckingStatus" class="loading-section">
    <mat-spinner diameter="50"></mat-spinner>
    <p *ngIf="isLoading">Gerando URL de autorização...</p>
    <p *ngIf="isCheckingStatus">Verificando status da conexão...</p>
  </div>
  
  <div *ngIf="error" class="alert alert-danger">
    {{ getFriendlyErrorMessage(error) }}
  </div>
  
  <!-- Debug information -->
  <div *ngIf="debugInfo && showDebugInfo" class="debug-section" style="margin-top: 20px; padding: 10px; background-color: #f0f0f0;">
    <h4>Informações de depuração:</h4>
    <pre>{{ debugInfo | json }}</pre>
  </div>
</div>